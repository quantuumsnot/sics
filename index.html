<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="cache-control" content="must-revalidate" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Sales and Inventory Control System</title>
    <link href="style.css" rel="stylesheet">
    <script>
      'use strict';
      var startTime = new Date().getTime();
    </script>
    <script src="sics.js" defer></script>
  </head>
  <body>
    <header style="text-align: center">
      <h1 id="softwarename">Sales and Inventory Control System</h1>
      <div class="notificationarea">
        <div class="notificationicons checkissues" id="checkissuesbutton" onclick="checkissuespopup.showModal(); checkIssues(); return false;" title="Show all products with issues">
          <div id="productissues"></div>
        </div>
        <div class="notificationicons usermessages" id="checkmessagesbutton" onclick="usermessagespopup.showModal(); checkMessages(); return false;" title="Show all events or messages">
          <div id="usermessages"></div>
        </div>
      </div>
    </header>
    
    <dialog id="checkissuespopup"></dialog>
    <dialog id="usermessagespopup"></dialog>

    <main>
      <div class="tabs">
        <input type="radio" name="tabs" id="tabone" checked="checked">
        <label for="tabone">Add new product</label>
        <div class="tab">
          <form class="addproduct-form" id="addproduct-form" name="addproduct-form" action="#" method="post">
            <input type="text"    id="name"       name="name"       required placeholder="Name" autofocus>
            <input type="number"  id="number"     name="number"     required placeholder="SKU" min="0">
            <input type="text"    id="category"   name="category"   required placeholder="Category">
            <input type="number"  id="quantity"   name="quantity"   required placeholder="Quantity" min="0">
            <input type="number"  id="available"  name="available"  required placeholder="Available" min="0">
            <input type="number"  id="price"      name="price"      required placeholder="Price" min="0">
            <input type="text"    id="info"       name="info"       required placeholder="Additional product info">
            <input type="text"    id="prodlinks"  name="prodlinks"  required placeholder="Product Links">
            <label class="prodpicuploadbutton"><div id="prodpicuploadbuttontext">Choose product pictures</div><input class="fileuploadbutton" id="pictures" name="pictures" type="file" multiple accept="image/png, image/jpeg, image/jpg"></label>
            <button class="addproductbutton" type="submit" id="addproduct" onclick="addProduct(); return false;">Add</button>
            <output class="new-product-results" id="newproductresults" style="text-align: center" name="newproductresults"></output>
          </form>
        </div>
        
        <input type="radio" name="tabs" id="tabtwo">
        <label for="tabtwo">Product Search</label>
        <div class="tab">
          <form class="searchproduct-form" name="searchproduct-form" action="#" method="post">
            <input type="number" id="searchnumber" name="searchnumber" required placeholder="SKU" min="0" autofocus>
            <button class="searchproductbutton" type="submit" id="searchproduct" onclick="searchProduct(); return false;">Search</button>
          </form>
          <output class="search-product-results" id="searchresults" style="text-align: center" name="searchresults">
            <form class="search-results-form" id="search-results-form" name="search-results-form" action="#" method="post">
              <label id="searchlabelname">Name<input type="text"   id="search-results-name"      name="search-results-name"       required placeholder="Name" autofocus></label>
              <label id="searchlabelnumber">SKU<input type="number" id="search-results-number"    name="search-results-number"     required placeholder="SKU" min="0"></label>
              <label id="searchlabelcategory">Category<input type="text"   id="search-results-category"  name="search-results-category"   required placeholder="Category"></label>
              <label id="searchlabelquantity">Quantity<input type="number" id="search-results-quantity"  name="search-results-quantity"   required placeholder="Quantity" min="0"></label>
              <label id="searchlabelavailable">Available<input type="number" id="search-results-available" name="search-results-available"  required placeholder="Available" min="0"></label>
              <label id="searchlabelprice">Price<input type="number" id="search-results-price"     name="search-results-price"      required placeholder="Price" min="0"></label>
              <label id="searchlabelinfo">Additional product info<input type="text"   id="search-results-info"      name="search-results-info"       required placeholder="Additional product info"></label>
              <label id="searchlabelprodlinks">Product Links<input type="text"   id="search-results-prodlinks" name="search-results-prodlinks"  required placeholder="Product Links"></label>
            </form>
            <div id="prodpicture"></div>
          </output>
        </div>
        
        <input type="radio" name="tabs" id="tabthree">
        <label for="tabthree">Sell</label>
        <div class="tab">
          <form class="sellproduct-form" name="sellproduct-form" action="#" method="post">
            <input type="number" id="sellnumber"    name="sellnumber"   required placeholder="SKU" autofocus min="0">
            <input type="number" id="sellquantity"  name="sellquantity" required placeholder="Quantity" min="0">
            <select name="soldin" id="soldin" required>
              <option value="a">-Choose where it was sold-</option>
              <option value="store">STORE</option>
              <option value="site">SITE</option>
              <option value="fb">Facebook</option>
              <option value="olx">OLX</option>
              <option value="bazar">Bazar.bg</option>
              <option value="phone">Telephone</option>
              <option value="viber">Viber</option>
            </select>
            <button class="sellproductbutton" type="submit" id="sellproduct" onclick="sellProduct(); return false;">Sell</button>
            <output class="sell-product-results" id="sellproductresults" style="text-align: center" name="sellproductresults"></output>
          </form>
        </div>
        
        <input type="radio" name="tabs" id="tabfour">
        <label for="tabfour">Customer Banlist</label>
        <div class="tab">
          <form class="customerbanlist-form" name="customerbanlist-form" action="#" method="post">
            <input type="number" id="customerphonenumber" name="customerphonenumber" required placeholder="Customer Phone Number" min="0">
            <button class="customerbanlistbutton" type="submit" id="customerbanlist" onclick="searchCustomer(); return false;">Search</button>
            <output class="customerbanlist-results" id="customerbanlistresults" style="text-align: center" name="customerbanlistresults"></output>
          </form>
        </div>
        
        <input type="radio" name="tabs" id="tabfive">
        <label for="tabfive">Ban customer</label>
        <div class="tab">
          <form class="bancustomer-form" name="bancustomer-form" action="#" method="post">
            <input type="text"    id="bancustomernames"       name="bancustomernames"       required placeholder="Customer names" autofocus>
            <input type="number"  id="bancustomerphonenumber" name="bancustomerphonenumber" required placeholder="Customer Phone Number" min="0">
            <input type="text"    id="bancustomeraddress"     name="bancustomeraddress"     required placeholder="Customer Address">
            <input type="date"    id="bancustomerorderdate"   name="bancustomerorderdate"   required min="01-01-1970">
            <select name="wherewasordered" id="wherewasordered" required>
              <option value="a">-Choose where it was ordered-</option>
              <option value="site">SITE</option>
              <option value="fb">Facebook</option>
              <option value="olx">OLX</option>
              <option value="bazar">Bazar.bg</option>
              <option value="phone">Telephone</option>
              <option value="viber">Viber</option>
            </select>
            <button class="bancustomerbutton" type="submit" id="bancustomer" onclick="banCustomer(); return false;">Ban</button>
            <output class="bancustomer-results" id="bancustomerresults" style="text-align: center" name="bancustomerresults"></output>
          </form>
        </div>
      </div>
    </main>
    
    <footer>
      <h4 id='loadingTime'></h4>
      
			<div id='licensearea' style="text-align: center">
				<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
					<img alt="Creative Commons License" style="border-width:0" src="cc-by-nc-sa.png" />
				</a>
				<br />This work is licensed under a 
				<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
					Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License
				</a>
			</div>
    </footer>
  </body>
  <script>
    'use strict';

    /*document.body.onload = function () {
      document.addEventListener('click', function(event) {
        if (event.target.tagName === 'A') {
          event.preventDefault(); event.stopPropagation();
          open(event.target.href).blur(); //disabling focus on the freshly opened tab is not working
          //event.target.dispatchEvent(new MouseEvent('click', {ctrlKey: true, cancelable: true})); //simulation of CTRL+click is not working
        }
      }, false);
    };*/
      
    var endTime = new Date().getTime();
    var totalTime = (endTime - startTime)/1000;
    if (document.getElementById("loadingTime"))
    {
      document.getElementById("loadingTime").innerHTML = `Page loaded in ${totalTime} seconds<br /><h2>v0.3 codename "Broken toys"</h2>`;
    }
  </script>
</html>